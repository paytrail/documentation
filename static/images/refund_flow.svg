<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="711px" preserveAspectRatio="none" style="width:767px;height:711px;" version="1.1" viewBox="0 0 767 711" width="767px" zoomAndPan="magnify"><defs><filter height="300%" id="fn9qic35z2fnr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F0FFFF" filter="url(#fn9qic35z2fnr)" height="129.9985" style="stroke: #FF0000; stroke-width: 1.0;" width="10" x="527.5" y="146.686"/><rect fill="#F0FFFF" filter="url(#fn9qic35z2fnr)" height="129.9985" style="stroke: #FF0000; stroke-width: 1.0;" width="10" x="527.5" y="392.8469"/><rect fill="#FFFFFF" filter="url(#fn9qic35z2fnr)" height="494.6501" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 2.0;" width="742.5" x="13" y="107.9531"/><rect fill="#FFFFFF" height="246.161" style="stroke: none; stroke-width: 1.0;" width="742.5" x="13" y="356.4422"/><line style="stroke: #FF0000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="117" x2="117" y1="90.9531" y2="619.6032"/><line style="stroke: #FF0000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="532.5" x2="532.5" y1="90.9531" y2="619.6032"/><line style="stroke: #FF0000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="699.5" x2="699.5" y1="90.9531" y2="619.6032"/><text fill="#222222" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="83" x="73" y="86.708">Merchant</text><ellipse cx="117.5" cy="13" fill="none" filter="url(#fn9qic35z2fnr)" rx="8" ry="8" style="stroke: #E60094; stroke-width: 2.0;"/><path d="M117.5,21 L117.5,48 M104.5,29 L130.5,29 M117.5,48 L104.5,63 M117.5,48 L130.5,63 " fill="none" filter="url(#fn9qic35z2fnr)" style="stroke: #E60094; stroke-width: 2.0;"/><text fill="#222222" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="83" x="73" y="635.3112">Merchant</text><ellipse cx="117.5" cy="649.5563" fill="none" filter="url(#fn9qic35z2fnr)" rx="8" ry="8" style="stroke: #E60094; stroke-width: 2.0;"/><path d="M117.5,657.5563 L117.5,684.5563 M104.5,665.5563 L130.5,665.5563 M117.5,684.5563 L104.5,699.5563 M117.5,684.5563 L130.5,699.5563 " fill="none" filter="url(#fn9qic35z2fnr)" style="stroke: #E60094; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="118" x="470.5" y="86.708">Merchant API</text><path d="M514.5,34 C514.5,24 532.5,24 532.5,24 C532.5,24 550.5,24 550.5,34 L550.5,60 C550.5,70 532.5,70 532.5,70 C532.5,70 514.5,70 514.5,60 L514.5,34 " fill="#F0E68C" filter="url(#fn9qic35z2fnr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M514.5,34 C514.5,44 532.5,44 532.5,44 C532.5,44 550.5,44 550.5,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="118" x="470.5" y="635.3112">Merchant API</text><path d="M514.5,649.5563 C514.5,639.5563 532.5,639.5563 532.5,639.5563 C532.5,639.5563 550.5,639.5563 550.5,649.5563 L550.5,675.5563 C550.5,685.5563 532.5,685.5563 532.5,685.5563 C532.5,685.5563 514.5,685.5563 514.5,675.5563 L514.5,649.5563 " fill="#F0E68C" filter="url(#fn9qic35z2fnr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M514.5,649.5563 C514.5,659.5563 532.5,659.5563 532.5,659.5563 C532.5,659.5563 550.5,659.5563 550.5,649.5563 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#222222" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="86" x="653.5" y="86.708">Customer</text><ellipse cx="699.5" cy="13" fill="none" filter="url(#fn9qic35z2fnr)" rx="8" ry="8" style="stroke: #E60094; stroke-width: 2.0;"/><path d="M699.5,21 L699.5,48 M686.5,29 L712.5,29 M699.5,48 L686.5,63 M699.5,48 L712.5,63 " fill="none" filter="url(#fn9qic35z2fnr)" style="stroke: #E60094; stroke-width: 2.0;"/><text fill="#222222" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="86" x="653.5" y="635.3112">Customer</text><ellipse cx="699.5" cy="649.5563" fill="none" filter="url(#fn9qic35z2fnr)" rx="8" ry="8" style="stroke: #E60094; stroke-width: 2.0;"/><path d="M699.5,657.5563 L699.5,684.5563 M686.5,665.5563 L712.5,665.5563 M699.5,684.5563 L686.5,699.5563 M699.5,684.5563 L712.5,699.5563 " fill="none" filter="url(#fn9qic35z2fnr)" style="stroke: #E60094; stroke-width: 2.0;"/><rect fill="#F0FFFF" filter="url(#fn9qic35z2fnr)" height="129.9985" style="stroke: #FF0000; stroke-width: 1.0;" width="10" x="527.5" y="146.686"/><rect fill="#F0FFFF" filter="url(#fn9qic35z2fnr)" height="129.9985" style="stroke: #FF0000; stroke-width: 1.0;" width="10" x="527.5" y="392.8469"/><path d="M25.5,107.9531 L77,107.9531 L77,114.9531 L67,124.9531 L13,124.9531 L13,120.4531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="494.6501" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 2.0;" width="742.5" x="13" y="107.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="121.02">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="92" y="120.1636">[Successful Refund]</text><polygon fill="#E60094" points="515.5,142.686,525.5,146.686,515.5,150.686,519.5,146.686" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="117.5" x2="521.5" y1="146.686" y2="146.686"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124.5" y="141.3864">1</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="137.5" y="141.62">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="179.5" y="141.62"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="179.5" y="139.5249">/merchant/v1/payments/:orderNumber/refunds</text><polygon fill="#E60094" points="128.5,171.8188,118.5,175.8188,128.5,179.8188,124.5,175.8188" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="122.5" x2="526.5" y1="175.8188" y2="175.8188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="134.5" y="170.7528">2</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="147.5" y="170.7528">HTTP 202 (Accepted)</text><line style="stroke: #E60094; stroke-width: 2.0;" x1="537.5" x2="579.5" y1="204.9516" y2="204.9516"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="579.5" x2="579.5" y1="204.9516" y2="217.9516"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="538.5" x2="579.5" y1="217.9516" y2="217.9516"/><polygon fill="#E60094" points="548.5,213.9516,538.5,217.9516,548.5,221.9516,544.5,217.9516" style="stroke: #E60094; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="544.5" y="199.8857">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="557.5" y="199.8857">Refund the payment</text><polygon fill="#E60094" points="687.5,243.0844,697.5,247.0844,687.5,251.0844,691.5,247.0844" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="537.5" x2="693.5" y1="247.0844" y2="247.0844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="544.5" y="242.0185">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="557.5" y="242.0185">Notify via email</text><polygon fill="#E60094" points="128.5,272.6844,118.5,276.6844,128.5,280.6844,124.5,276.6844" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="122.5" x2="531.5" y1="276.6844" y2="276.6844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="134.5" y="271.3849">5</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="147.5" y="271.6185">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="179.5" y="271.6185"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="179.5" y="269.5234">/notify_url</text><path d="M23,302.1844 L23,305.1844 A12.5,12.5 0 0 0 35.5,317.6844 L195.5,317.6844 A12.5,12.5 0 0 0 208,305.1844 L208,299.6844 L198,289.6844 L35.5,289.6844 A12.5,12.5 0 0 0 23,302.1844 " fill="#F0F0F0" filter="url(#fn9qic35z2fnr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M198,289.6844 L198,293.4344 A6.25,6.25 0 0 0 204.25,299.6844 L208,299.6844 L198,289.6844 " fill="#F0F0F0" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="164" x="29" y="309.536">Refund is completed.</text><polygon fill="#E60094" points="520.5,344.4422,530.5,348.4422,520.5,352.4422,524.5,348.4422" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="117.5" x2="526.5" y1="348.4422" y2="348.4422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124.5" y="343.3763">6</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="137.5" y="343.3763">HTTP 2XX (Success)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="755.5" y1="357.4422" y2="357.4422"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="18" y="367.6527">[Cancelled Refund]</text><polygon fill="#E60094" points="515.5,388.8469,525.5,392.8469,515.5,396.8469,519.5,392.8469" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="117.5" x2="521.5" y1="392.8469" y2="392.8469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124.5" y="387.5474">1</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="137.5" y="387.781">DELETE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="195.5" y="387.781"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="195.5" y="385.6859">/merchant/v1/refunds/:token</text><polygon fill="#E60094" points="128.5,417.9797,118.5,421.9797,128.5,425.9797,124.5,421.9797" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="122.5" x2="526.5" y1="421.9797" y2="421.9797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="134.5" y="416.9138">2</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="147.5" y="416.9138">HTTP 204 (No Content)</text><line style="stroke: #E60094; stroke-width: 2.0;" x1="537.5" x2="579.5" y1="451.1125" y2="451.1125"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="579.5" x2="579.5" y1="451.1125" y2="464.1125"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="538.5" x2="579.5" y1="464.1125" y2="464.1125"/><polygon fill="#E60094" points="548.5,460.1125,538.5,464.1125,548.5,468.1125,544.5,464.1125" style="stroke: #E60094; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="544.5" y="446.0466">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="557.5" y="446.0466">Cancel the refund</text><polygon fill="#E60094" points="687.5,489.2454,697.5,493.2454,687.5,497.2454,691.5,493.2454" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="537.5" x2="693.5" y1="493.2454" y2="493.2454"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="544.5" y="488.1794">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="557.5" y="488.1794">Notify via email</text><polygon fill="#E60094" points="128.5,518.8454,118.5,522.8454,128.5,526.8454,124.5,522.8454" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="122.5" x2="531.5" y1="522.8454" y2="522.8454"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="134.5" y="517.5458">5</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="147.5" y="517.7794">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="179.5" y="517.7794"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="179.5" y="515.6844">/notify_url</text><path d="M28,548.3454 L28,551.3454 A12.5,12.5 0 0 0 40.5,563.8454 L190.5,563.8454 A12.5,12.5 0 0 0 203,551.3454 L203,545.8454 L193,535.8454 L40.5,535.8454 A12.5,12.5 0 0 0 28,548.3454 " fill="#F0F0F0" filter="url(#fn9qic35z2fnr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M193,535.8454 L193,539.5954 A6.25,6.25 0 0 0 199.25,545.8454 L203,545.8454 L193,535.8454 " fill="#F0F0F0" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="154" x="34" y="555.6969">Refund is cancelled.</text><polygon fill="#E60094" points="520.5,590.6032,530.5,594.6032,520.5,598.6032,524.5,594.6032" style="stroke: #E60094; stroke-width: 1.0;"/><line style="stroke: #E60094; stroke-width: 2.0;" x1="117.5" x2="526.5" y1="594.6032" y2="594.6032"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124.5" y="589.5373">6</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="137.5" y="589.5373">HTTP 2XX (Success)</text><!--MD5=[208b793f59fd4e827d0a92c18c39570f]
@startuml
skinparam backgroundColor transparent
skinparam sequenceArrowThickness 2
skinparam roundcorner 25
skinparam shadowing<<with_shadow>> true
skinparam sequence {
ArrowColor #e60094
LifeLineBorderColor Red
LifeLineBackgroundColor Azure
ActorBackgroundColor transparent
ActorBorderColor #e60094
ActorFontColor #222
ActorFontSize 18
}
skinparam note {
BackgroundColor #F0F0F0
FontSize 16
}
skinparam database {
BackgroundColor Khaki
FontSize 18
}
actor Merchant as M
database "Merchant API" as API
actor Customer as C
alt Successful Refund
autonumber
M -> API: **POST** ""/merchant/v1/payments/:orderNumber/refunds""
activate API
M <- API: **HTTP 202 (Accepted)**
API -> API: Refund the payment
API -> C: Notify via email
M <- API: **GET** ""/notify_url""
deactivate API
note over M
Refund is completed.
end note
M -> API: **HTTP 2XX (Success)**
autonumber stop
else Cancelled Refund
autonumber
M -> API: **DELETE** ""/merchant/v1/refunds/:token""
activate API
M <- API: **HTTP 204 (No Content)**
API -> API: Cancel the refund
API -> C: Notify via email
M <- API: **GET** ""/notify_url""
deactivate API
note over M
Refund is cancelled.
end note
M -> API: **HTTP 2XX (Success)**
autonumber stop
end
@enduml

PlantUML version 1.2020.06(Sun Apr 05 15:38:32 EEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>